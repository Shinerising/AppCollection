(()=>{"use strict";class t{}t.URL="app.awayne.me",t.Owner="Shinerising",t.API="https://github-api.awayne.me/api",t.Download="https://github-api.awayne.me/download";var e=function(t,e,i,n){return new(i||(i=Promise))((function(s,a){function r(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}l((n=n.apply(t,e||[])).next())}))};class i{static timeout(t){return e(this,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{e(!0)}),t)}))}))}static nextFrame(){return e(this,void 0,void 0,(function*(){return new Promise((t=>{requestAnimationFrame((()=>{t(!0)}))}))}))}static debounce(t,e){let i;return(...n)=>{clearTimeout(i),i=setTimeout((()=>{clearTimeout,t(...n)}),e)}}static isURL(t){return t.length<2083&&/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?$/gi.test(t)}}class n{static load(){this.sitename=document.querySelector("#sitename"),this.titleBox=document.querySelector("#title"),this.coverGlass=document.querySelector("#cover>.cover-glass"),this.card=document.querySelector(".card"),this.collection=document.querySelector(".collection")}static query(t){return document.querySelector(t)}static queryAll(t){return document.querySelectorAll(t)}}var s=function(t,e,i,n){return new(i||(i=Promise))((function(s,a){function r(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}l((n=n.apply(t,e||[])).next())}))};HTMLElement.prototype.addClass=function(t){this.classList.contains(t)||this.classList.add(t)},HTMLElement.prototype.removeClass=function(t){this.classList.contains(t)&&this.classList.remove(t)},HTMLElement.prototype.toggleClass=function(t){this.classList.contains(t)?this.classList.remove(t):this.classList.add(t)},HTMLElement.prototype.val=function(t){return""===t?this.value="":t&&(this.value=t),this.value},(new class{start(){return s(this,void 0,void 0,(function*(){yield this.waitDocumentReady(),n.load(),this.startTypingTitle("Sic Parvis Magna."),this.addScrollHandler(),class{static startFetching(){return e(this,void 0,void 0,(function*(){const e=yield this.fetchData("list.json");n.card.addClass("visible");for(const i of e){const e=yield this.fetchData(`${t.API}/${t.Owner}/${i.name}`),n=yield this.fetchData(`${t.API}/${t.Owner}/${i.name}/releases`),s=this.generateNode(i,e,n);this.applyNode(s)}}))}static applyNode(t){return e(this,void 0,void 0,(function*(){n.collection.innerHTML+=t,yield i.nextFrame(),n.queryAll("section.repo").forEach((t=>t.addClass("visible")))}))}static generateNode(e,i,n){const s=n.filter((t=>!t.prerelease))[0],a=n.filter((t=>t.prerelease))[0];return`\n<section class="repo">\n<div class="repo-cover">\n<img src="https://raw.githubusercontent.com/${i.full_name}/master/preview.jpg"/>\n</div>\n<div class="repo-info">\n<div class="repo-icon">\n<img src="https://raw.githubusercontent.com/${i.full_name}/master/icon.png">\n</div>\n<h2 class="repo-title">${e.full_name||i.name}</h2>\n<div class="repo-labelbox">\n<span>${i.language}</span>${i.topics.map((t=>`<span>${t}</span>`)).join("")}\n</div>\n<p class="repo-description">${i.description}</p>\n</div>\n<div class="repo-link">\n<a class="link-github icon-tag" href="${(null==a?void 0:a.html_url)||""}">Release</a>\n<a class="link-github icon-download" href="${(null==a?void 0:a.assets[0])?`${a.assets[0].url.replace("https://api.github.com/repos",t.Download)}?file=${a.assets[0].name}`:""}">Preview</a>\n<a class="link-github icon-download" href="${(null==s?void 0:s.assets[0])?`${s.assets[0].url.replace("https://api.github.com/repos",t.Download)}?file=${s.assets[0].name}`:""}">Package ${(null==s?void 0:s.tag_name.toUpperCase())||"Release"}</a>\n</div>\n</section>\n    `}static fetchData(t){return e(this,void 0,void 0,(function*(){return yield fetch(t).then((t=>t.json())).then((t=>t))}))}}.startFetching();try{yield this.registerServiceWorker()}catch(t){console.error(t)}}))}registerServiceWorker(){return s(this,void 0,void 0,(function*(){"serviceWorker"in navigator&&(yield navigator.serviceWorker.register("service-worker.js"))}))}startTypingTitle(t){return s(this,void 0,void 0,(function*(){yield i.timeout(500),n.query("#titleBox").style.opacity="1",n.query("#titleBack").textContent=t,yield i.timeout(1e3);for(const e of t.split(""))yield i.timeout(50+Math.round(200*Math.random())),n.titleBox.innerHTML+=" "===e?"&nbsp;":e}))}addScrollHandler(){let t=window.scrollY,e=!1;this.setScrollValue(t),document.addEventListener("scroll",(()=>{t=window.scrollY,e||(window.requestAnimationFrame((()=>{this.setScrollValue(t),e=!1})),e=!0)}))}setScrollValue(t){const e=Math.min(3,Math.min(t/100,20)),i=Math.min(5,Math.min(t/100,20)),s=Math.min(2,Math.min(t/100,10)-2),a=Math.max(0,2-Math.max(t/200,1)),r=`saturate(180%) blur(${i}rem)`;n.coverGlass.setAttribute("style",`-webkit-backdrop-filter:${r};backdrop-filter:${r}`),n.titleBox.setAttribute("style",`filter:blur(${s}rem);opacity:${a}`),n.sitename.setAttribute("style",`filter:blur(${e}rem);opacity:${a}`)}waitDocumentReady(){return new Promise((t=>{if("complete"===document.readyState||"interactive"===document.readyState)t(!0);else{const e=()=>{document.removeEventListener("DOMContentLoaded",e),t(!0)};document.addEventListener("DOMContentLoaded",e)}}))}}).start()})();